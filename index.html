<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pro Racer - Elite Dashboard</title>
    <!-- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶è‡¶∏‡¶°‡¶ø‡¶ï‡ßá -->
    <script src='//libtl.com/sdk.js' data-zone='10641290' data-sdk='show_10641290'></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Montserrat:wght@400;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #00f2ff;
            --accent: #ff0055;
            --neon-yellow: #faff00;
            --bg-dark: #05070a;
            --glass: rgba(11, 14, 20, 0.85);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; -webkit-tap-highlight-color: transparent; }

        body {
            background: var(--bg-dark);
            background-image: linear-gradient(to bottom, rgba(5, 7, 10, 0.8), rgba(5, 7, 10, 0.95)), 
                              url('https://images.unsplash.com/photo-1511919884226-fd3cad34687c?auto=format&fit=crop&q=80&w=1470');
            background-size: cover; background-position: center; height: 100vh; color: white; display: flex; flex-direction: column; overflow: hidden;
        }

        /* ‡¶ü‡¶™ ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® */
        .top-nav { padding: 20px; display: flex; justify-content: space-between; align-items: center; }

        .currency-pill {
            background: var(--glass); backdrop-filter: blur(15px); padding: 8px 18px; border-radius: 50px;
            border: 1px solid rgba(0, 242, 255, 0.4); display: flex; align-items: center; gap: 10px;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.2);
        }

        .btn-plus {
            background: var(--primary); color: #000; width: 22px; height: 22px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-weight: 900; cursor: pointer; margin-left: 5px;
        }

        .level-badge {
            background: linear-gradient(45deg, var(--accent), #ff5e00); padding: 5px 15px; border-radius: 8px;
            font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 14px; box-shadow: 0 0 15px rgba(255, 0, 85, 0.4);
        }

        /* ‡¶π‡¶ø‡¶∞‡ßã ‡¶∏‡ßá‡¶ï‡¶∂‡¶® */
        .hero { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 0 30px; text-align: center; }
        .score-display h1 { font-family: 'Orbitron', sans-serif; font-size: 50px; font-weight: 900; color: #fff; text-shadow: 0 0 20px rgba(255,255,255,0.3); margin: 10px 0; }
        .score-label { text-transform: uppercase; letter-spacing: 5px; color: var(--primary); font-size: 11px; font-weight: 800; }

        .best-card { background: var(--glass); padding: 12px 25px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); margin-top: -10px; }
        .best-score-val { font-family: 'Orbitron', sans-serif; color: var(--neon-yellow); font-size: 18px; }

        /* ‡¶¨‡¶æ‡¶ü‡¶® ‡¶è‡¶∞‡¶ø‡ßü‡¶æ */
        .action-area { width: 100%; max-width: 400px; display: flex; flex-direction: column; gap: 15px; padding-bottom: 50px; }
        .btn { width: 100%; border-radius: 15px; border: none; font-family: 'Orbitron', sans-serif; font-size: 16px; font-weight: 900; text-transform: uppercase; transition: 0.2s; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        
        .btn-main { background: linear-gradient(45deg, #0084ff, var(--primary)); color: #000; height: 70px; box-shadow: 0 8px 20px rgba(0, 242, 255, 0.4); }
        .btn-secondary { background: var(--glass); height: 60px; border: 1px solid rgba(255,255,255,0.15); color: white; }
        .btn:active { transform: scale(0.96); }

        /* ‡¶™‡¶™‡¶Ü‡¶™ */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 100; backdrop-filter: blur(10px); }
        .modal-card { width: 90%; max-width: 400px; background: #0f1218; border-radius: 25px; padding: 30px; text-align: center; border: 2px solid var(--primary); }

        .health-bar-container { height: 14px; background: #1a1e26; border-radius: 50px; margin: 20px 0; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
        .health-bar-fill { height: 100%; width: 100%; background: linear-gradient(90deg, var(--accent), #ff9100); transition: 1.5s; }

        #repair-view { position: fixed; inset: 0; background: #000; display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; }
        .loader { width: 60px; height: 60px; border: 5px solid #111; border-top: 5px solid var(--primary); border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .rules-list { text-align: left; margin: 15px 0; font-size: 12px; color: #ccc; }
        .rules-list li { margin-bottom: 8px; list-style: none; }
        .rules-list span { color: var(--primary); font-weight: bold; }
    </style>
</head>
<body>

    <div class="top-nav">
        <div class="currency-pill">
            <span style="font-size: 18px;">üíé</span>
            <span id="dia-count" style="font-family: 'Orbitron'; color: var(--primary);">0</span>
            <div class="btn-plus" onclick="getBonus()">+</div>
        </div>
        <div class="level-badge">LVL <span id="lvl-txt">1</span></div>
    </div>

    <div class="hero">
        <div class="score-display">
            <p class="score-label">Total Driving Distance</p>
            <h1 id="total-dist">0 m</h1>
            <div class="best-card">
                <p style="font-size: 9px; opacity: 0.5; text-transform: uppercase;">Personal Best</p>
                <p class="best-score-val" id="best-dist">0 m</p>
            </div>
        </div>
        
        <div class="action-area">
            <button class="btn btn-main" onclick="start()">ENTER RACE</button>
            <button class="btn btn-secondary" onclick="openGarage()">GARAGE</button>
            <button class="btn btn-secondary" onclick="openRules()">RULES</button>
        </div>
    </div>

    <!-- ‡¶ó‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶ú -->
    <div id="g-pop" class="modal-overlay">
        <div class="modal-card">
            <h2 style="font-family: 'Orbitron'; color: var(--primary);">CAR STATUS</h2>
            <div class="health-bar-container"><div id="bar-fill" class="health-bar-fill"></div></div>
            <p style="font-weight: 800; margin-bottom: 20px;">CONDITION: <span id="h-pct">100%</span></p>
            <button class="btn btn-main" style="height: 55px;" onclick="repair()">REPAIR (WATCH AD)</button>
            <button class="btn btn-secondary" style="margin-top: 10px; height: 50px;" onclick="closeP()">CLOSE</button>
        </div>
    </div>

    <!-- ‡¶∞‡ßÅ‡¶≤‡¶∏ -->
    <div id="r-pop" class="modal-overlay">
        <div class="modal-card" style="border-color: var(--neon-yellow);">
            <h2 style="font-family: 'Orbitron'; color: var(--neon-yellow);">RACING RULES</h2>
            <ul class="rules-list">
                <li><span>1. ENTRY:</span> Costs 20 Diamonds per race.</li>
                <li><span>2. FUEL:</span> Tank lasts 14s. Collect ‚õΩ to refill.</li>
                <li><span>3. TURBO:</span> Over 110km/h for 10s causes Short Circuit!</li>
                <li><span>4. NEAR MISS:</span> Overtake closely for +4 üíé bonus.</li>
                <li><span>5. REPAIR:</span> Collect ‚öì to recover 2% health.</li>
            </ul>
            <button class="btn btn-main" style="background: var(--neon-yellow); height: 55px;" onclick="closeRules()">UNDERSTOOD</button>
        </div>
    </div>

    <div id="repair-view">
        <div class="loader"></div>
        <p style="margin-top: 20px; font-family: 'Orbitron'; letter-spacing: 3px; color: var(--primary);">PROCESSING AD...</p>
    </div>

    <script>
        const STORE_KEY = 'cargame_store';
        const milestones = [0, 150, 300, 700, 1000, 1400, 1900, 2500, 3000, 3500, 4000, 4700, 5500, 6200, 7000, 7800, 8600, 9500, 10500, 12000, 13200, 14500, 16000, 18000, 20000, 23000, 26000, 30000, 35000, 40000, 50000];

        function getLevel(score) {
            for (let i = milestones.length - 1; i >= 0; i--) {
                if (score >= milestones[i]) return i + 1;
            }
            return 1;
        }

        function formatVal(num) {
            if (num < 1000) return num + " m";
            if (num < 1000000) return (num / 1000).toFixed(2) + " km";
            return (num / 1000000).toFixed(2) + " M";
        }

        function loadGameData() {
            const data = JSON.parse(localStorage.getItem(STORE_KEY)) || { totalDist: 0, bestDist: 0, diamonds: 0, carHealth: 100 };
            return data;
        }

        let stats = loadGameData();

        function ui() {
            stats = loadGameData(); // ‡¶≤‡ßá‡¶ü‡ßá‡¶∏‡ßç‡¶ü ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶°
            document.getElementById('total-dist').innerText = formatVal(stats.totalDist);
            document.getElementById('best-dist').innerText = formatVal(stats.bestDist);
            document.getElementById('dia-count').innerText = stats.diamonds;
            document.getElementById('lvl-txt').innerText = getLevel(stats.bestDist);
            document.getElementById('bar-fill').style.width = stats.carHealth + '%';
            document.getElementById('h-pct').innerText = stats.carHealth + '%';
        }

        function start() {
            if(stats.carHealth <= 30) {
                alert("CAR DAMAGE TOO HIGH! Repair first.");
                openGarage();
            } else if(stats.diamonds < 20) {
                if(confirm("Insufficient Diamonds! Watch an ad to get 35 FREE Diamonds?")) {
                    getBonus();
                }
            } else {
                location.href = 'game.html';
            }
        }

        function getBonus() {
            if (typeof show_10641290 === 'function') {
                document.getElementById('repair-view').style.display = 'flex';
                show_10641290().then(() => {
                    stats.diamonds += 35;
                    localStorage.setItem(STORE_KEY, JSON.stringify(stats));
                    document.getElementById('repair-view').style.display = 'none';
                    ui();
                    alert("Congratulations! You received 35 Diamonds üíé");
                });
            } else {
                alert("Ads not loaded yet. Try again later.");
            }
        }

        function repair() {
            if(stats.carHealth >= 100) return;
            if (typeof show_10641290 === 'function') {
                closeP();
                document.getElementById('repair-view').style.display = 'flex';
                show_10641290().then(() => {
                    stats.carHealth = 100;
                    localStorage.setItem(STORE_KEY, JSON.stringify(stats));
                    document.getElementById('repair-view').style.display = 'none';
                    ui();
                    openGarage();
                });
            } else {
                alert("Ad System Offline. Try again.");
            }
        }

        function openGarage() { document.getElementById('g-pop').style.display = 'flex'; ui(); }
        function closeP() { document.getElementById('g-pop').style.display = 'none'; }
        function openRules() { document.getElementById('r-pop').style.display = 'flex'; }
        function closeRules() { document.getElementById('r-pop').style.display = 'none'; }

        window.onload = ui;
        // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß© ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶™‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶∞‡¶¨‡ßá (‡¶Ø‡¶¶‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ó‡ßá‡¶Æ ‡¶•‡ßá‡¶ï‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ü‡¶∏‡ßá)
        setInterval(ui, 3000);
    </script>
</body>
</html>